<nav class="navbar navbar-expand-md bg-body fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" routerLink="/">RunwayFinance</a>
  <button
    class="navbar-toggler d-flex d-md-none order-3 p-2 focus-ring focus-ring-primary"
    style="--bs-focus-ring-color: rgba(var(--bs-success-rgb), .0)"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#navbarOffcanvasLg">
    <i class="bi bi-three-dots"></i>
  </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="navbarOffcanvasLg" aria-labelledby="navbarOffcanvasLgLabel">
      <div class="offcanvas-header px-4 pb-0">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">
          RunwayFinance
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <form class="d-flex position-relative flex-grow-1" role="search">
          <input
            [formControl]="searchControl"
            (keyup.enter)="onSearch()"
            (focus)="onFocus()"
            style="--bs-focus-ring-color: rgba(var(--bs-success-rgb), .0)"
            class="form-control form-control-lg me-2 border border-2 border-body bg-body-tertiary rounded-pill
            focus-ring focus-ring-primary"
            type="search" placeholder="Search" aria-label="Search">
          <div class="dropdown-menu d-block position-absolute top-100 shadow border border-2 border-body rounded-3 mt-2"
            *ngIf="(searchStateService.showDropdown$ | async) && searchResults.length > 0">
            <a class="dropdown-item py-2 px-3" *ngFor="let result of (searchStateService.searchResults$ | async)" routerLink="/company/{{result.id}}"
              (click)="hideDropdown()"
              (keyup.enter)="hideDropdown();
              navigateToCompany(result);"
              >
              {{ result.name }}
            </a>
          </div>
        </form>
        <theme-cycler-button [size]="'btn-lg'" class="me-2"></theme-cycler-button>
        <ng-container *ngIf="!(accountService.currentAccount$ | async)">
          <a class="btn btn-lg btn-outline-secondary border border-2 border-secondary
            focus-ring focus-ring-primary me-2"
            routerLink="/auth/login"
            style="--bs-focus-ring-color: rgba(var(--bs-success-rgb), .0)"
            >Login</a>
          <a class="btn btn-lg btn-primary border-0 bg-primary bg-opacity-50 text-body"
            routerLink="/auth/register"
            style="--bs-focus-ring-color: rgba(var(--bs-success-rgb), .0)"
            >Sign-up</a>
        </ng-container>
        <ul class="navbar-nav" *ngIf="(accountService.currentAccount$ | async) as account">
          <div class="nav-item btn-group">
            <button class="btn btn-link btn-lg dropdown-toggle text-decoration-none text-body d-flex align-items-center" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="{{account.photoUrl}}" height="32" width="32" class="rounded-circle me-2"
                alt="{{account.firstName}} {{account.lastName}} nav profile picture">
              {{account.firstName}}
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" routerLink="/account">
                <i class="bi bi-gear me-2"></i>
                Settings</a></li>
              <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item pointer" (click)="accountService.logout()">Logout</a></li>
            </ul>
          </div>
        </ul>
      </div>
    </div>
  </div>
</nav>
